# Environment Variables for Vercel Deployment

## Required for Cloud Sync (Now Watching Feature)

These environment variables must be set in your Vercel project dashboard:

### 1. FOXCLI_API_KEY (Required for security)
A secret key to prevent unauthorized updates to your "Now Watching" status.

**Generate a random key:**
```bash
openssl rand -hex 32
```

**Or use any long random string**

**Set in Vercel:**
1. Go to your Vercel dashboard
2. Select your project (foxems)
3. Go to Settings â†’ Environment Variables
4. Add: `FOXCLI_API_KEY` = your generated key

**Set in Extension:**
1. Open the FoxCLI extension popup
2. Enter the same API key in settings
3. Enable "Cloud Sync"

### 2. VERCEL_KV_REST_API_URL (Optional)
Only needed if you want to use Vercel KV storage for caching.

If you have Vercel KV enabled, this will be auto-populated.

### 3. VERCEL_KV_REST_API_TOKEN (Optional)
Only needed if using Vercel KV storage.

If you have Vercel KV enabled, this will be auto-populated.

## How It Works

1. **Extension** sends your "Now Watching" data to Vercel via HTTP POST every 15 seconds
2. **Vercel Serverless Function** stores the data (in memory or KV)
3. **Website** reads from the same Vercel endpoint to display the live card
4. **Local FoxCLI App** still works via WebSocket for Discord RPC

## Without KV Storage

If you don't set KV variables, the serverless function will:
- Accept updates via POST (stored temporarily in memory)
- Return data via GET
- Data persists for the lifetime of the serverless instance (usually a few minutes)

**Note:** Without KV, the "Now Watching" card may not persist if no one is watching for a few minutes. The card will reappear once the extension sends new data.

## Security Note

Always keep your FOXCLI_API_KEY secret! Never commit it to git. If you disable the API key (leave it empty), anyone can update your status - not recommended.
